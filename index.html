<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dataset Selection Guide</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@300;400;500&family=DM+Sans:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: #f7f8fa; }
    .seg-hover { cursor: pointer; }
    .seg-hover:hover { opacity: 0.85; }
    .filter-btn {
      transition: all 0.18s;
      border: 2px solid;
      cursor: pointer;
      font-family: 'DM Mono', monospace;
      font-size: 11px;
      font-weight: 500;
      padding: 5px 13px;
      border-radius: 20px;
      letter-spacing: 0.04em;
    }
    .filter-btn:hover { transform: translateY(-1px); box-shadow: 0 3px 10px rgba(0,0,0,0.12); }
    #tooltip {
      position: fixed;
      display: none;
      background: white;
      border: 1.5px solid #e2e8f0;
      border-radius: 8px;
      padding: 10px 14px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.12);
      font-size: 12px;
      font-family: 'DM Sans', sans-serif;
      max-width: 280px;
      z-index: 9999;
      pointer-events: none;
      line-height: 1.6;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <div id="tooltip"></div>

  <script type="text/babel">
    const { useState, useRef, useEffect } = React;

    const datasets = [
      {id:1,group:"CrossElev",source:"SRTM15+",type:"elevation, bathymetry",realm:"ocean, terrestrial, freshwater",method:"radar remote sensing + multi-source integration",period:"2000-2023",temporalRes:"static",spatialRes:"15''",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:2,group:"CrossElev-TS",source:"PaleoDEM",type:"elevation, bathymetry",realm:"ocean, terrestrial, freshwater",method:"climate modelling + multi-source integration",period:"540 Ma BP-present",temporalRes:"5-million year",spatialRes:"0.1° to 1°",future:false,past:true,bioclim:false,otherVars:false,ts:true},
      {id:3,group:"CrossElev-TS",source:"ICESat-2",type:"elevation, vegetation structure",realm:"ocean, terrestrial, freshwater",method:"lidar remote sensing",period:"2018-present",temporalRes:"daily, weekly, monthly, 3-monthly",spatialRes:"20 m",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:4,group:"CrossCover-TS",source:"LC-CCI",type:"land cover",realm:"ocean, terrestrial, freshwater",method:"optical remote sensing + multi-source integration",period:"1992-2020",temporalRes:"annually",spatialRes:"300 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:5,group:"CrossClim-TS",source:"CMIP6",type:"climate",realm:"ocean, terrestrial",method:"climate modelling",period:"1850-2014, 2015-2100",temporalRes:"daily, monthly",spatialRes:"80 to 250 km",future:true,past:true,bioclim:false,otherVars:true,ts:true},
      {id:6,group:"CrossClim-TS",source:"ERA5",type:"climate",realm:"ocean, terrestrial",method:"reanalysis",period:"1940-present",temporalRes:"hourly, daily, monthly",spatialRes:"0.25°",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:7,group:"CrossClim-TS",source:"NEX-GDDP-CMIP6",type:"climate",realm:"ocean, terrestrial",method:"climate modelling + downscaling",period:"1950-2014, 2015-2100",temporalRes:"daily",spatialRes:"0.25°",future:true,past:false,bioclim:false,otherVars:true,ts:true},
      {id:8,group:"CrossClim-TS",source:"NCEP/NCAR Reanalysis",type:"climate",realm:"ocean, terrestrial",method:"reanalysis",period:"1948-present",temporalRes:"6-hourly, daily, monthly",spatialRes:"2.5°",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:9,group:"CrossClim-TS",source:"GISTEMP",type:"climate, surface temperature",realm:"ocean, terrestrial",method:"in-situ measurement + multi-source integration",period:"1880-present",temporalRes:"monthly, annually",spatialRes:"2°",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:10,group:"CrossElev",source:"ETOPO",type:"elevation, bathymetry",realm:"ocean, terrestrial",method:"multi-source integration + interpolation",period:"2022",temporalRes:"static",spatialRes:"15''",future:false,past:false,bioclim:false,otherVars:true,ts:false},
      {id:11,group:"CrossElev",source:"GEBCO",type:"elevation, bathymetry",realm:"ocean, terrestrial",method:"multi-source integration",period:"2019-2025",temporalRes:"static",spatialRes:"15''",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:12,group:"CrossElev",source:"GCC",type:"elevation, bathymetry, ocean circulation, land use",realm:"ocean, terrestrial",method:"optical remote sensing + multi-source integration",period:"several",temporalRes:"static",spatialRes:"1 km",future:false,past:false,bioclim:false,otherVars:true,ts:false},
      {id:13,group:"CrossCover",source:"Global Shoreline Vector",type:"land cover",realm:"ocean, terrestrial",method:"optical remote sensing",period:"2014",temporalRes:"static",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:14,group:"CrossCover-TS",source:"Global Mangrove Watch",type:"land cover",realm:"ocean, terrestrial",method:"radar + optical remote sensing",period:"1996-2020",temporalRes:"2 to 3-year",spatialRes:"25 m",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:15,group:"CrossClim-TS",source:"SMOS",type:"ocean circulation, soil",realm:"ocean, terrestrial",method:"passive microwave remote sensing",period:"2009-present",temporalRes:"3-daily, 10-daily, monthly",spatialRes:"35 to 50 km",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:16,group:"FwCover",source:"ESA Global Water Bodies",type:"land cover, hydrology",realm:"ocean, freshwater",method:"optical remote sensing",period:"2000-2012",temporalRes:"static",spatialRes:"300 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:17,group:"OcnBathy",source:"EMODnet Bathymetry",type:"bathymetry",realm:"ocean",method:"multi-source integration + interpolation",period:"2009-present",temporalRes:"static",spatialRes:"1/16' to 15''",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:18,group:"OcnBathy",source:"Global Coastal Bathymetry",type:"bathymetry",realm:"ocean",method:"optical remote sensing",period:"2019-2024",temporalRes:"static",spatialRes:"100 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:19,group:"OcnClim",source:"MARSPEC",type:"bathymetry, climate, paleoclimate, ocean circulation",realm:"ocean",method:"hydrodynamic modelling + multi-source integration",period:"1955-2010",temporalRes:"static",spatialRes:"30'' to 5'",future:false,past:true,bioclim:true,otherVars:true,ts:false},
      {id:20,group:"OcnBiogeo-TS",source:"CMEMS Surface Ocean Carbon",type:"biogeochemistry",realm:"ocean",method:"in-situ measurement + interpolation",period:"1985-present",temporalRes:"monthly",spatialRes:"0.25°",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:21,group:"OcnBiogeo-TS",source:"CMEMS Global Ocean Biogeochemistry",type:"biogeochemistry",realm:"ocean",method:"biogeochemical modelling",period:"1993-present",temporalRes:"daily, monthly",spatialRes:"0.25°",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:22,group:"OcnBiogeo-TS",source:"CMEMS Global Low and Mid Trophic Levels",type:"biogeochemistry",realm:"ocean",method:"ecosystem modelling",period:"1998-2024",temporalRes:"daily",spatialRes:"0.083°",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:23,group:"OcnClim",source:"Bio-Oracle",type:"climate, ocean circulation",realm:"ocean",method:"hydrodynamic modelling + multi-source integration",period:"2000-2100",temporalRes:"decadal",spatialRes:"0.05°",future:true,past:false,bioclim:false,otherVars:true,ts:false},
      {id:24,group:"OcnClim-TS",source:"HadISST",type:"climate, surface temperature",realm:"ocean",method:"in-situ measurement + multi-source integration + interpolation",period:"1856-present",temporalRes:"monthly",spatialRes:"1°, 5°",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:25,group:"OcnHuman",source:"Cumulative Impacts to Global Marine Ecosystems",type:"human pressure",realm:"ocean",method:"multi-source integration",period:"2010-2050",temporalRes:"static",spatialRes:"10 km",future:true,past:false,bioclim:false,otherVars:true,ts:false},
      {id:26,group:"OcnHuman-TS",source:"Global Fishing Watch",type:"human pressure",realm:"ocean",method:"radar + optical remote sensing + multi-source integration",period:"2012-present",temporalRes:"daily",spatialRes:"0.1°",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:27,group:"OcnPhys-TS",source:"CMEMS Global Ocean Physics",type:"ocean circulation",realm:"ocean",method:"reanalysis",period:"2020-present",temporalRes:"hourly, daily, monthly",spatialRes:"0.083°",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:28,group:"OcnPhys-TS",source:"OSCAR",type:"ocean circulation",realm:"ocean",method:"radar remote sensing + hydrodynamic modelling",period:"1990-present",temporalRes:"daily, weekly, monthly",spatialRes:"0.25°",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:29,group:"OcnPhys-TS",source:"HYCOM",type:"ocean circulation",realm:"ocean",method:"hydrodynamic modelling",period:"1993-present",temporalRes:"3-hourly, daily, monthly",spatialRes:"1/12°",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:30,group:"OcnPhys-TS",source:"GLOBCURRENT",type:"ocean circulation",realm:"ocean",method:"radar remote sensing + in-situ measurement + hydrodynamic modelling",period:"1993-present",temporalRes:"hourly, daily, monthly",spatialRes:"0.25°",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:31,group:"OcnPhys-TS",source:"OLTraj",type:"ocean circulation",realm:"ocean",method:"hydrodynamic modelling",period:"1998-2019",temporalRes:"monthly",spatialRes:"1/8°",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:32,group:"OcnPhys-TS",source:"CMEMS Sea Surface Heights",type:"ocean circulation",realm:"ocean",method:"radar remote sensing + interpolation",period:"1993-present",temporalRes:"daily",spatialRes:"0.125°",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:33,group:"OcnPhys-TS",source:"CMEMS Global Ocean Waves",type:"ocean circulation",realm:"ocean",method:"hydrodynamic modelling",period:"1980-present",temporalRes:"hourly, monthly",spatialRes:"0.2°",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:34,group:"OcnColour-TS",source:"Global ocean chlorophyll-a concentration",type:"ocean colour",realm:"ocean",method:"optical remote sensing + multi-source integration",period:"1997-present",temporalRes:"monthly",spatialRes:"4 km",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:35,group:"OcnColour-TS",source:"Global Mapped Carbon Data",type:"ocean colour, biogeochemistry",realm:"ocean",method:"optical remote sensing",period:"2024-present",temporalRes:"daily",spatialRes:"4 km",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:36,group:"OcnClim-TS",source:"NOAA OISST",type:"surface temperature",realm:"ocean",method:"in-situ measurement + optical remote sensing + interpolation",period:"1981-present",temporalRes:"daily, weekly",spatialRes:"0.25°",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:37,group:"OcnClim-TS",source:"GHRSST",type:"surface temperature",realm:"ocean",method:"optical remote sensing + multi-source integration",period:"2002-present",temporalRes:"daily",spatialRes:"0.01°",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:38,group:"FwHydro",source:"HydroSHEDS",type:"elevation, hydrology",realm:"freshwater",method:"radar remote sensing + hydrological modelling",period:"2000",temporalRes:"static",spatialRes:"3'' to 1'",future:false,past:false,bioclim:false,otherVars:true,ts:false},
      {id:39,group:"FwHydro",source:"MERIT Hydro",type:"elevation, hydrology",realm:"freshwater",method:"radar + optical remote sensing + hydrological modelling",period:"2000-2010",temporalRes:"static",spatialRes:"3''",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:40,group:"FwHydro",source:"EarthEnv Freshwater",type:"elevation, hydrology, climate, land cover, geology, soil",realm:"freshwater",method:"multi-source integration",period:"1950-2000",temporalRes:"static",spatialRes:"1 km",future:false,past:false,bioclim:true,otherVars:true,ts:false},
      {id:41,group:"FwHydro-TS",source:"Global Surface Water Explorer",type:"hydrology",realm:"freshwater",method:"optical remote sensing",period:"1984-2021",temporalRes:"monthly, annually",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:42,group:"FwQuality-TS",source:"Freshwater Ecosystems Explorer",type:"hydrology, water quality",realm:"freshwater",method:"multi-source integration",period:"2000-2018",temporalRes:"annually",spatialRes:"30 to 300 m",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:43,group:"FwCover",source:"GLWD",type:"land cover, hydrology",realm:"freshwater",method:"optical remote sensing + multi-source integration",period:"1984-2020",temporalRes:"static",spatialRes:"15''",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:44,group:"FwCover",source:"G3WBM / G1WBM",type:"land cover, hydrology",realm:"freshwater",method:"optical remote sensing",period:"1990-2010",temporalRes:"static",spatialRes:"1'' to 3''",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:45,group:"FwCover",source:"Global seasonal dynamics of inland water and ice",type:"land cover, hydrology",realm:"freshwater",method:"optical remote sensing",period:"2019",temporalRes:"monthly",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:46,group:"FwHydro-TS",source:"LSWT",type:"surface temperature",realm:"freshwater",method:"thermal remote sensing",period:"1995-present",temporalRes:"daily",spatialRes:"0.05°",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:47,group:"FwQuality",source:"GEMStat",type:"water quality",realm:"freshwater",method:"in-situ measurement",period:"1906-2024",temporalRes:"irregular",spatialRes:"points",future:false,past:false,bioclim:false,otherVars:true,ts:false},
      {id:48,group:"TerClim",source:"WorldClim",type:"climate",realm:"terrestrial",method:"in-situ measurement + interpolation",period:"1950-2024",temporalRes:"monthly",spatialRes:"30''",future:true,past:true,bioclim:true,otherVars:true,ts:false},
      {id:49,group:"TerClim",source:"MERRAclim",type:"climate",realm:"terrestrial",method:"reanalysis",period:"1980-2000",temporalRes:"decadal",spatialRes:"2.5'",future:false,past:false,bioclim:true,otherVars:true,ts:false},
      {id:50,group:"TerClim",source:"CliMond",type:"climate",realm:"terrestrial",method:"in-situ measurement + interpolation",period:"1975, 1961-1990, 2030-2080",temporalRes:"static",spatialRes:"10'",future:true,past:false,bioclim:true,otherVars:false,ts:false},
      {id:51,group:"TerClim-TS",source:"ERA5-Land",type:"climate",realm:"terrestrial",method:"reanalysis",period:"1950-present",temporalRes:"hourly",spatialRes:"0.1°",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:52,group:"TerClim-TS",source:"CRU TS",type:"climate",realm:"terrestrial",method:"in-situ measurement + interpolation",period:"1901-present",temporalRes:"monthly",spatialRes:"0.5°",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:53,group:"TerClim-TS",source:"CHELSA-monthly",type:"climate",realm:"terrestrial",method:"reanalysis + downscaling",period:"1979-2021",temporalRes:"monthly",spatialRes:"30''",future:false,past:false,bioclim:true,otherVars:true,ts:true},
      {id:54,group:"TerClim-TS",source:"CHELSA-daily",type:"climate",realm:"terrestrial",method:"reanalysis + downscaling",period:"1979-2025",temporalRes:"daily",spatialRes:"30''",future:false,past:false,bioclim:true,otherVars:true,ts:true},
      {id:55,group:"TerClim-TS",source:"CHELSA-W5E5",type:"climate",realm:"terrestrial",method:"reanalysis + bias correction",period:"1979-2016",temporalRes:"daily",spatialRes:"30''",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:56,group:"TerClim-TS",source:"CHELSA-EarthEnv",type:"climate",realm:"terrestrial",method:"reanalysis + downscaling",period:"2003-2016",temporalRes:"daily",spatialRes:"30''",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:57,group:"TerClim-TS",source:"CHELSAcruts",type:"climate",realm:"terrestrial",method:"in-situ measurement + downscaling",period:"1901-2016",temporalRes:"monthly",spatialRes:"30''",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:58,group:"TerClim-TS",source:"CHELSA BIOCLIM+",type:"climate",realm:"terrestrial",method:"climate modelling + downscaling + bias correction",period:"1980-2100",temporalRes:"monthly, annually",spatialRes:"30''",future:true,past:false,bioclim:true,otherVars:true,ts:true},
      {id:59,group:"TerClim-TS",source:"CHELSA-climatologies",type:"climate",realm:"terrestrial",method:"climate modelling + downscaling",period:"1981-2100",temporalRes:"monthly",spatialRes:"30''",future:true,past:false,bioclim:true,otherVars:true,ts:true},
      {id:60,group:"TerClim-TS",source:"CHELSA-drought-indices",type:"climate",realm:"terrestrial",method:"reanalysis + downscaling",period:"1980-2018",temporalRes:"monthly",spatialRes:"30''",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:61,group:"TerClim-TS",source:"TerraClimate",type:"climate",realm:"terrestrial",method:"in-situ measurement + interpolation",period:"1950-2025",temporalRes:"monthly, annually",spatialRes:"4 km",future:true,past:true,bioclim:true,otherVars:true,ts:true},
      {id:62,group:"TerClim",source:"CMCC-BioClimInd",type:"climate",realm:"terrestrial",method:"climate modelling",period:"1960-1999, 2040-2079, 2060-2099",temporalRes:"static",spatialRes:"0.5°",future:true,past:false,bioclim:true,otherVars:false,ts:false},
      {id:63,group:"TerClim",source:"EcoClimate",type:"climate",realm:"terrestrial",method:"climate modelling",period:"1950-1999",temporalRes:"static",spatialRes:"0.5°",future:true,past:true,bioclim:true,otherVars:false,ts:false},
      {id:64,group:"TerClim",source:"Envirem",type:"climate, paleoclimate",realm:"terrestrial",method:"in-situ measurement + interpolation",period:"1960-1990, 6 ka BP, 21 ka BP",temporalRes:"static",spatialRes:"30'' to 10'",future:false,past:true,bioclim:true,otherVars:true,ts:false},
      {id:65,group:"TerPaleo",source:"Paleoclim",type:"climate, paleoclimate",realm:"terrestrial",method:"climate modelling",period:"1979-2013, 3.3 Ma BP-present",temporalRes:"static",spatialRes:"2.5'",future:false,past:true,bioclim:true,otherVars:false,ts:false},
      {id:66,group:"TerDist-TS",source:"Global forest loss due to fire",type:"disturbance",realm:"terrestrial",method:"optical remote sensing",period:"2001-present",temporalRes:"annually",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:67,group:"TerDist-TS",source:"MODIS Burned Areas",type:"disturbance",realm:"terrestrial",method:"optical remote sensing",period:"2000-present",temporalRes:"monthly",spatialRes:"500 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:68,group:"TerDist-TS",source:"FIRMS",type:"disturbance",realm:"terrestrial",method:"optical remote sensing",period:"2012-present",temporalRes:"daily",spatialRes:"375 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:69,group:"TerDist-TS",source:"FireCCI",type:"disturbance",realm:"terrestrial",method:"optical remote sensing",period:"1982-2024",temporalRes:"monthly, annually",spatialRes:"250 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:70,group:"TerDist-TS",source:"GFED",type:"disturbance",realm:"terrestrial",method:"optical remote sensing + ecosystem modelling",period:"1997-present",temporalRes:"monthly",spatialRes:"0.25°",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:71,group:"TerElev",source:"SRTM",type:"elevation",realm:"terrestrial",method:"radar remote sensing",period:"2000",temporalRes:"static",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:72,group:"TerElev",source:"ASTER GDEM",type:"elevation",realm:"terrestrial",method:"optical remote sensing",period:"2000-2013",temporalRes:"static",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:73,group:"TerElev",source:"NASADEM",type:"elevation",realm:"terrestrial",method:"radar remote sensing + multi-source integration",period:"2000",temporalRes:"static",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:74,group:"TerElev",source:"TanDEM-X DEM",type:"elevation",realm:"terrestrial",method:"radar remote sensing",period:"2010-2015",temporalRes:"static",spatialRes:"12 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:75,group:"TerElev",source:"Copernicus DEM",type:"elevation",realm:"terrestrial",method:"radar remote sensing",period:"2010-2015",temporalRes:"static",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:76,group:"TerElev",source:"GMTED2010",type:"elevation",realm:"terrestrial",method:"multi-source integration",period:"1994-2008",temporalRes:"static",spatialRes:"250 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:77,group:"TerElev",source:"AW3D30",type:"elevation",realm:"terrestrial",method:"optical remote sensing",period:"2006-2011",temporalRes:"static",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:78,group:"TerElev",source:"MERIT DEM",type:"elevation",realm:"terrestrial",method:"radar + optical remote sensing + multi-source integration",period:"2000-2011",temporalRes:"static",spatialRes:"90 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:79,group:"TerElev",source:"GTOPO30",type:"elevation",realm:"terrestrial",method:"multi-source integration",period:"1960-1994",temporalRes:"static",spatialRes:"1 km",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:80,group:"TerElev",source:"GEDTM",type:"elevation",realm:"terrestrial",method:"lidar + radar + optical remote sensing",period:"2011-2023",temporalRes:"static",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:81,group:"TerElev",source:"FABDEM",type:"elevation",realm:"terrestrial",method:"radar remote sensing + machine learning",period:"2011-2015",temporalRes:"static",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:82,group:"TerElev",source:"Fathom DEM",type:"elevation",realm:"terrestrial",method:"lidar + radar + optical remote sensing + multi-source integration",period:"2011-2025",temporalRes:"static",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:83,group:"TerElev-TS",source:"ASTER",type:"elevation, surface temperature, surface reflectance",realm:"terrestrial",method:"optical + thermal remote sensing",period:"2000-present",temporalRes:"on-demand, 16-days",spatialRes:"15 m",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:84,group:"TerSoil",source:"GLiM",type:"geology",realm:"terrestrial",method:"in-situ measurement + multi-source integration",period:"several",temporalRes:"static",spatialRes:"0.5°",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:85,group:"TerDist",source:"Global Human Modification",type:"human pressure",realm:"terrestrial",method:"optical remote sensing + multi-source integration",period:"1990-2022",temporalRes:"static",spatialRes:"90 m",future:false,past:false,bioclim:false,otherVars:true,ts:false},
      {id:86,group:"TerDist",source:"Travel Time to Major Cities",type:"human pressure",realm:"terrestrial",method:"multi-source integration",period:"2000",temporalRes:"static",spatialRes:"30''",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:87,group:"TerDist-TS",source:"WorldPop Global Population",type:"human pressure",realm:"terrestrial",method:"in-situ measurement + optical remote sensing + machine learning",period:"2015-2030",temporalRes:"annually",spatialRes:"100 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:88,group:"TerDist-TS",source:"LandScan Global",type:"human pressure",realm:"terrestrial",method:"ecosystem modelling + multi-source integration",period:"2000-present",temporalRes:"annually",spatialRes:"30''",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:89,group:"TerDist-TS",source:"Global Human Footprint",type:"human pressure",realm:"terrestrial",method:"optical remote sensing + multi-source integration",period:"2000-2018",temporalRes:"annually",spatialRes:"1 km",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:90,group:"TerDist-TS",source:"Harmonized Global Night-Time Lights",type:"human pressure",realm:"terrestrial",method:"optical remote sensing",period:"1992-2024",temporalRes:"monthly",spatialRes:"30''",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:91,group:"TerDist",source:"PEST-CHEMGRIDS",type:"human pressure, land use",realm:"terrestrial",method:"in-situ measurement + multi-source integration",period:"2015-2025",temporalRes:"5-year",spatialRes:"10 km",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:92,group:"TerDist",source:"GRIP",type:"human pressure, land use",realm:"terrestrial",method:"multi-source integration",period:"2000-2015",temporalRes:"static",spatialRes:"8 km",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:93,group:"TerDist-TS",source:"Global Gridded Livestock",type:"human pressure, land use",realm:"terrestrial",method:"multi-source integration",period:"1961-2021",temporalRes:"annually",spatialRes:"5 km",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:94,group:"TerDist-TS",source:"GHSL",type:"human pressure, land use",realm:"terrestrial",method:"optical remote sensing + machine learning",period:"1975-2030, 1975-2100",temporalRes:"5-year",spatialRes:"10 m",future:true,past:false,bioclim:false,otherVars:true,ts:true},
      {id:95,group:"TerDist-TS",source:"GAIA",type:"human pressure, land use",realm:"terrestrial",method:"optical remote sensing + machine learning",period:"1985-2022",temporalRes:"annually",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:96,group:"TerLULC",source:"GFCC",type:"land cover",realm:"terrestrial",method:"optical remote sensing",period:"2000-2015",temporalRes:"5-year",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:97,group:"TerLULC",source:"ESA WorldCover",type:"land cover",realm:"terrestrial",method:"radar + optical remote sensing + machine learning",period:"2020-2021",temporalRes:"static",spatialRes:"10 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:98,group:"TerLULC",source:"GLCC",type:"land cover",realm:"terrestrial",method:"optical remote sensing",period:"1992-1993",temporalRes:"static",spatialRes:"1 km",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:99,group:"TerLULC",source:"GLC-SHARE",type:"land cover",realm:"terrestrial",method:"multi-source integration",period:"2014",temporalRes:"static",spatialRes:"1 km",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:100,group:"TerLULC",source:"EarthEnv Global Land Cover",type:"land cover",realm:"terrestrial",method:"optical remote sensing + multi-source integration",period:"1992-2012",temporalRes:"static",spatialRes:"1 km",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:101,group:"TerLULC",source:"UMD Land Cover",type:"land cover",realm:"terrestrial",method:"optical remote sensing",period:"1984-1993",temporalRes:"static",spatialRes:"100 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:102,group:"TerLULC",source:"ISLSCP II UMD Global Land Cover",type:"land cover",realm:"terrestrial",method:"optical remote sensing",period:"1992-1993",temporalRes:"static",spatialRes:"0.25°",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:103,group:"TerLULC",source:"GLC2000",type:"land cover",realm:"terrestrial",method:"optical remote sensing",period:"2000",temporalRes:"static",spatialRes:"1 km",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:104,group:"TerLULC",source:"GLCNMO",type:"land cover",realm:"terrestrial",method:"optical remote sensing",period:"2003, 2008, 2013",temporalRes:"static",spatialRes:"500 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:105,group:"TerLULC-TS",source:"MODIS Land Cover",type:"land cover",realm:"terrestrial",method:"optical remote sensing + machine learning",period:"2001-present",temporalRes:"annually",spatialRes:"500 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:106,group:"TerLULC-TS",source:"Copernicus Global Dynamic Land Cover",type:"land cover",realm:"terrestrial",method:"radar + optical remote sensing + machine learning",period:"2015-present",temporalRes:"annually",spatialRes:"10 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:107,group:"TerLULC-TS",source:"Dynamic World",type:"land cover",realm:"terrestrial",method:"optical remote sensing + machine learning",period:"2015-present",temporalRes:"daily, weekly",spatialRes:"10 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:108,group:"TerLULC-TS",source:"GLC-FSC30D",type:"land cover",realm:"terrestrial",method:"optical remote sensing",period:"1985-2022",temporalRes:"annually, 5-year",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:109,group:"TerLULC-TS",source:"Esri Land Cover",type:"land cover",realm:"terrestrial",method:"optical remote sensing + machine learning",period:"2017-2024",temporalRes:"annually",spatialRes:"10 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:110,group:"TerLULC-TS",source:"GLCLUC2020",type:"land cover",realm:"terrestrial",method:"optical remote sensing",period:"2000-2020",temporalRes:"5-year",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:111,group:"TerLULC-TS",source:"Global Salt Marsh Change",type:"land cover",realm:"terrestrial",method:"optical remote sensing",period:"2000-2019",temporalRes:"5-year",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:112,group:"TerDist-TS",source:"DIST-ALERT",type:"land cover, disturbance",realm:"terrestrial",method:"optical remote sensing",period:"2022-present",temporalRes:"daily",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:113,group:"TerLULC",source:"EarthEnv Habitat Heterogeneity",type:"land cover, spectral indices",realm:"terrestrial",method:"optical remote sensing",period:"2001-2005",temporalRes:"static",spatialRes:"1 km",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:114,group:"TerLULC",source:"Geo-Wiki Field Size",type:"land use",realm:"terrestrial",method:"optical remote sensing + multi-source integration",period:"2010-2017",temporalRes:"static",spatialRes:"1 km",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:115,group:"TerLULC",source:"GlobeLand30",type:"land use",realm:"terrestrial",method:"optical remote sensing",period:"2000, 2010",temporalRes:"static",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:116,group:"TerLULC",source:"SPAM",type:"land use",realm:"terrestrial",method:"ecosystem modelling + multi-source integration",period:"2000, 2005, 2010, 2017, 2020",temporalRes:"static",spatialRes:"10 km",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:117,group:"TerLULC",source:"GHG Emissions on Croplands",type:"land use",realm:"terrestrial",method:"ecosystem modelling + multi-source integration",period:"1997-2003",temporalRes:"static",spatialRes:"10 km",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:118,group:"TerLULC",source:"Harvested Area and Yield",type:"land use",realm:"terrestrial",method:"ecosystem modelling + multi-source integration",period:"1997-2003",temporalRes:"static",spatialRes:"10 km",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:119,group:"TerLULC-TS",source:"HYDE",type:"land use",realm:"terrestrial",method:"ecosystem modelling + multi-source integration",period:"12 ka BP-present",temporalRes:"100 to 1000-year",spatialRes:"5'",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:120,group:"TerPaleo-TS",source:"CHELSA-TraCE21k",type:"paleoclimate",realm:"terrestrial",method:"climate modelling + downscaling",period:"21 ka BP-present",temporalRes:"100-year",spatialRes:"30''",future:false,past:true,bioclim:false,otherVars:true,ts:true},
      {id:121,group:"TerPaleo-TS",source:"CHELSA-TraCE21k-bioclim",type:"paleoclimate",realm:"terrestrial",method:"climate modelling + downscaling",period:"21 ka BP-present",temporalRes:"100-year",spatialRes:"30''",future:false,past:true,bioclim:true,otherVars:true,ts:true},
      {id:122,group:"TerPaleo-TS",source:"Oscillayers",type:"paleoclimate",realm:"terrestrial",method:"climate modelling",period:"5.4 Ma BP-present",temporalRes:"10 000-year",spatialRes:"2.5'",future:false,past:true,bioclim:true,otherVars:true,ts:true},
      {id:123,group:"TerPaleo-TS",source:"PALEO-PGEM-Series",type:"paleoclimate",realm:"terrestrial",method:"climate modelling",period:"5 Ma BP-present",temporalRes:"1000-year",spatialRes:"1°",future:false,past:true,bioclim:true,otherVars:true,ts:true},
      {id:124,group:"TerPaleo-TS",source:"PaleoView",type:"paleoclimate",realm:"terrestrial",method:"climate modelling",period:"21 ka BP-present",temporalRes:"10 to 1000-year",spatialRes:"2.5°",future:false,past:true,bioclim:true,otherVars:true,ts:true},
      {id:125,group:"TerPaleo-TS",source:"HadCM3 800 ka",type:"paleoclimate",realm:"terrestrial",method:"climate modelling",period:"800 ka BP-present",temporalRes:"1000-year",spatialRes:"0.5°",future:false,past:true,bioclim:true,otherVars:true,ts:true},
      {id:126,group:"TerPaleo-TS",source:"HadCM3 120 ka",type:"paleoclimate",realm:"terrestrial",method:"climate modelling",period:"20 ka BP-present",temporalRes:"1000-year",spatialRes:"0.5°",future:false,past:true,bioclim:true,otherVars:true,ts:true},
      {id:127,group:"TerSoil",source:"HWSD",type:"soil",realm:"terrestrial",method:"in-situ measurement + multi-source integration",period:"several",temporalRes:"static",spatialRes:"30''",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:128,group:"TerSoil",source:"SoilGrids",type:"soil",realm:"terrestrial",method:"in-situ measurement + machine learning",period:"several",temporalRes:"static",spatialRes:"250 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:129,group:"TerSoil",source:"GSDE",type:"soil",realm:"terrestrial",method:"in-situ measurement + multi-source integration",period:"several",temporalRes:"static",spatialRes:"30''",future:false,past:false,bioclim:false,otherVars:true,ts:false},
      {id:130,group:"TerVeg",source:"Global Aboveground and Belowground Biomass Carbon Density",type:"vegetation structure",realm:"terrestrial",method:"lidar + radar + optical remote sensing",period:"2010",temporalRes:"static",spatialRes:"300 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:131,group:"TerVeg",source:"Global Forest Canopy Height",type:"vegetation structure",realm:"terrestrial",method:"lidar remote sensing + machine learning",period:"2019",temporalRes:"static",spatialRes:"30 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:132,group:"TerVeg",source:"A High-Resolution Canopy Height Model of the Earth",type:"vegetation structure",realm:"terrestrial",method:"lidar remote sensing + machine learning",period:"2020",temporalRes:"static",spatialRes:"10 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:133,group:"TerVeg",source:"ESA GlobBiomass",type:"vegetation structure",realm:"terrestrial",method:"radar remote sensing + machine learning",period:"2010",temporalRes:"static",spatialRes:"150 m",future:false,past:false,bioclim:false,otherVars:false,ts:false},
      {id:134,group:"TerVeg-TS",source:"Forest Area, Carbon Stocks, and Biomass",type:"vegetation structure",realm:"terrestrial",method:"in-situ measurement + multi-source integration",period:"1950-2010",temporalRes:"5-year",spatialRes:"1°",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:135,group:"TerVeg-TS",source:"GEDI",type:"vegetation structure",realm:"terrestrial",method:"lidar remote sensing",period:"2019-present",temporalRes:"weekly, monthly",spatialRes:"25 m",future:false,past:false,bioclim:false,otherVars:true,ts:true},
      {id:136,group:"TerVeg-TS",source:"PROBA-V",type:"vegetation structure",realm:"terrestrial",method:"optical remote sensing",period:"2013-2020",temporalRes:"2-daily",spatialRes:"300 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:137,group:"TerVeg-TS",source:"Gross Primary Productivity",type:"vegetation structure, land cover",realm:"terrestrial",method:"optical remote sensing + ecosystem modelling",period:"1982-2016",temporalRes:"monthly",spatialRes:"8 km",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:138,group:"TerVeg-TS",source:"ECOSTRESS",type:"vegetation structure, soil, surface temperature",realm:"terrestrial",method:"thermal remote sensing",period:"2018-present",temporalRes:"1 to 5-daily",spatialRes:"70 m",future:false,past:false,bioclim:false,otherVars:false,ts:true},
      {id:139,group:"TerVeg-TS",source:"Global Vegetation Greenness",type:"vegetation structure, spectral indices",realm:"terrestrial",method:"optical remote sensing",period:"1981-2022",temporalRes:"2-weekly",spatialRes:"0.083°",future:false,past:false,bioclim:false,otherVars:false,ts:true},
    ];

    const TOTAL = 139;

    function parseSpatialRes(s) {
      if (!s || s.includes("points") || s.includes("variable")) return Infinity;
      const m = s.toLowerCase();
      const secMatch = m.match(/(\d+(\.\d+)?)[''″'']/);
      if (secMatch) return parseFloat(secMatch[1]) * 30;
      const degMatch = m.match(/(\d+(\.\d+)?)\s*°/);
      if (degMatch) return parseFloat(degMatch[1]) * 111000;
      const kmMatch = m.match(/(\d+(\.\d+)?)\s*km/);
      if (kmMatch) return parseFloat(kmMatch[1]) * 1000;
      const mMatch = m.match(/^(\d+)\s*m/);
      if (mMatch) return parseFloat(mMatch[1]);
      return Infinity;
    }

    const ROWS = [
      { label: ["FUTURE", "SCENARIOS"], key: "future", color: "#3B82F6", filter: d => d.future, annotations: [] },
      { label: ["PALEO"], key: "past", color: "#F59E0B", filter: d => d.past, annotations: [] },
      { label: ["HIGH RES", "SPATIAL", "(≤30 m)"], key: "highres", color: "#10B981", filter: d => parseSpatialRes(d.spatialRes) <= 30, annotations: [] },
      { label: ["TEMPORAL", "SERIES"], key: "ts", color: "#8B5CF6", filter: d => d.ts, annotations: [] },
      { label: ["BIOCLIM", "VARIABLES"], key: "bioclim", color: "#EF4444", filter: d => d.bioclim, annotations: [] },
    ];

    function getMatchingIds(filter) {
      return new Set(datasets.filter(filter).map(d => d.id));
    }

    function getSegments(matchSet) {
      const segments = [];
      let start = null;
      for (let i = 1; i <= TOTAL; i++) {
        if (matchSet.has(i)) { if (start === null) start = i; }
        else { if (start !== null) { segments.push({ start, end: i - 1 }); start = null; } }
      }
      if (start !== null) segments.push({ start, end: TOTAL });
      return segments;
    }

    function App() {
      const [activeFilters, setActiveFilters] = useState(new Set());
      const [hoveredId, setHoveredId] = useState(null);
      const svgRef = useRef(null);
      const tooltipEl = document.getElementById("tooltip");

      const BAR_H = 28;
      const BAR_GAP = 52;
      const LABEL_W = 115;
      const PAD = { top: 32, right: 30, bottom: 55, left: LABEL_W };
      const INNER_W = 860;
      const SVG_W = INNER_W + PAD.left + PAD.right;
      const SVG_H = ROWS.length * (BAR_H + BAR_GAP) + PAD.top + PAD.bottom + 20;

      const xPos = id => ((id - 1) / (TOTAL - 1)) * INNER_W;
      const xW = () => INNER_W / (TOTAL - 1);

      const allMatchSets = ROWS.map(r => getMatchingIds(r.filter));

      const activeMatchedIds = activeFilters.size === 0 ? null : (() => {
        let result = null;
        for (const key of activeFilters) {
          const ri = ROWS.findIndex(r => r.key === key);
          const matchSet = allMatchSets[ri];
          if (result === null) { result = new Set(matchSet); }
          else { for (const id of result) { if (!matchSet.has(id)) result.delete(id); } }
        }
        return result;
      })();

      function toggleFilter(key) {
        setActiveFilters(prev => {
          const n = new Set(prev);
          n.has(key) ? n.delete(key) : n.add(key);
          return n;
        });
      }

      function showTooltip(e, d) {
        setHoveredId(d.id);
        const tags = [
          d.future ? `<span style="background:#dbeafe;color:#1d4ed8;border-radius:4px;padding:1px 7px;font-size:10px">Future</span>` : "",
          d.past   ? `<span style="background:#fef3c7;color:#92400e;border-radius:4px;padding:1px 7px;font-size:10px">Paleo</span>` : "",
          d.bioclim? `<span style="background:#fee2e2;color:#991b1b;border-radius:4px;padding:1px 7px;font-size:10px">Bioclim</span>` : "",
          d.ts     ? `<span style="background:#ede9fe;color:#5b21b6;border-radius:4px;padding:1px 7px;font-size:10px">Time Series</span>` : "",
          d.otherVars?`<span style="background:#f0fdf4;color:#166534;border-radius:4px;padding:1px 7px;font-size:10px">Other Vars</span>` : "",
        ].filter(Boolean).join(" ");

        tooltipEl.innerHTML = `
          <div style="font-weight:700;color:#1e293b;font-size:13px;margin-bottom:2px">
            <span style="display:inline-block;background:#6366f1;color:white;border-radius:4px;padding:0 6px;font-size:10px;margin-right:6px;font-weight:600">#${d.id}</span>
            ${d.source}
          </div>
          <div style="color:#475569;font-size:11px">${d.group}</div>
          <div style="margin-top:6px;display:grid;grid-template-columns:auto 1fr;gap:2px 8px;font-size:11px">
            <span style="color:#94a3b8">Type</span><span>${d.type}</span>
            <span style="color:#94a3b8">Realm</span><span>${d.realm}</span>
            <span style="color:#94a3b8">Period</span><span>${d.period || "—"}</span>
            <span style="color:#94a3b8">Spatial</span><span>${d.spatialRes}</span>
            <span style="color:#94a3b8">Temporal</span><span>${d.temporalRes}</span>
            <span style="color:#94a3b8">Method</span><span>${d.method}</span>
          </div>
          ${tags ? `<div style="margin-top:7px;display:flex;gap:5px;flex-wrap:wrap">${tags}</div>` : ""}
        `;
        tooltipEl.style.display = "block";
        positionTooltip(e);
      }

      function positionTooltip(e) {
        const tw = 290, th = 200;
        let left = e.clientX + 14;
        let top = e.clientY - 10;
        if (left + tw > window.innerWidth - 10) left = e.clientX - tw - 14;
        if (top + th > window.innerHeight - 10) top = e.clientY - th;
        tooltipEl.style.left = left + "px";
        tooltipEl.style.top = top + "px";
      }

      function hideTooltip() {
        tooltipEl.style.display = "none";
        setHoveredId(null);
      }

      const tickIds = [];
      for (let i = 1; i <= TOTAL; i += 10) tickIds.push(i);
      if (tickIds[tickIds.length - 1] !== TOTAL) tickIds.push(TOTAL);

      return (
        <div style={{ fontFamily: "'DM Mono', 'Courier New', monospace", background: "#f7f8fa", minHeight: "100vh", padding: "28px 20px" }}>
          <div style={{ maxWidth: 1060, margin: "0 auto" }}>

            {/* Filter buttons */}
            <div style={{ display: "flex", flexWrap: "wrap", gap: 8, marginBottom: 20, alignItems: "center" }}>
              {ROWS.map(row => {
                const active = activeFilters.has(row.key);
                return (
                  <button key={row.key} className="filter-btn" onClick={() => toggleFilter(row.key)}
                    style={{ background: active ? row.color : "white", borderColor: row.color, color: active ? "white" : row.color }}>
                    {row.label.join(" ")}
                  </button>
                );
              })}
              {activeFilters.size > 0 && (
                <button className="filter-btn" onClick={() => setActiveFilters(new Set())}
                  style={{ background: "white", borderColor: "#94a3b8", color: "#64748b" }}>
                  ✕ Clear
                </button>
              )}
              {activeMatchedIds && (
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: "#64748b", marginLeft: 6 }}>
                  → <b style={{ color: "#1e293b" }}>{activeMatchedIds.size}</b> datasets match
                </span>
              )}
            </div>

            {/* SVG figure */}
            <div style={{ background: "white", borderRadius: 12, boxShadow: "0 2px 16px rgba(0,0,0,0.07)", padding: "18px 10px 10px", overflowX: "auto" }}>
              <svg ref={svgRef} width={SVG_W} height={SVG_H} style={{ display: "block", minWidth: 600 }}
                onMouseLeave={hideTooltip}>

                {ROWS.map((row, ri) => {
                  const matchSet = allMatchSets[ri];
                  const segments = getSegments(matchSet);
                  const yBase = PAD.top + ri * (BAR_H + BAR_GAP);
                  const isActiveFilter = activeFilters.has(row.key);

                  return (
                    <g key={row.key} transform={`translate(${PAD.left},${yBase})`}>
                      {/* Label */}
                      {row.label.map((t, i) => (
                        <text key={i} x={-10} y={(BAR_H / 2) - ((row.label.length - 1) * 6) + i * 13}
                          textAnchor="end" style={{ fontSize: 10, fontFamily: "'DM Mono', monospace", fill: "#475569", fontWeight: 500 }}>
                          {t}
                        </text>
                      ))}

                      {/* Track */}
                      <rect x={0} y={0} width={INNER_W} height={BAR_H} rx={4}
                        fill={isActiveFilter ? "#e0f2fe" : "#f1f5f9"} />

                      {/* Grid lines */}
                      {tickIds.map(tick => (
                        <line key={tick} x1={xPos(tick)} y1={0} x2={xPos(tick)} y2={BAR_H}
                          stroke="#e2e8f0" strokeWidth={0.8} />
                      ))}

                      {/* Coloured segments */}
                      {segments.map(({ start, end }) => {
                        const x = xPos(start);
                        const w = xPos(end) - xPos(start) + xW();
                        const dimmed = activeMatchedIds &&
                          ![...Array(end - start + 1)].some((_, k) => activeMatchedIds.has(start + k));
                        return (
                          <rect key={start} x={x} y={0} width={w} height={BAR_H} rx={2}
                            fill={row.color} opacity={dimmed ? 0.15 : 0.9} />
                        );
                      })}

                      {/* Hover targets (invisible, one per dataset) */}
                      {datasets.map(d => (
                        <rect key={d.id}
                          x={xPos(d.id)} y={0}
                          width={Math.max(xW(), 3)} height={BAR_H}
                          fill="transparent" className="seg-hover"
                          onMouseEnter={e => showTooltip(e, d)}
                          onMouseMove={e => positionTooltip(e)}
                        />
                      ))}

                      {/* Hovered ID marker */}
                      {hoveredId && (
                        <line x1={xPos(hoveredId) + xW() / 2} y1={0}
                          x2={xPos(hoveredId) + xW() / 2} y2={BAR_H}
                          stroke="#1e293b" strokeWidth={1.5} opacity={0.4} />
                      )}

                      {/* Annotations */}
                      {row.annotations.map((ann, ai) => {
                        const ids = ann.ids.filter(id => id >= 1 && id <= TOTAL);
                        if (!ids.length) return null;
                        const x1 = xPos(Math.min(...ids));
                        const x2 = xPos(Math.max(...ids)) + xW();
                        const cx = (x1 + x2) / 2;
                        const isTop = ann.side === "top";
                        const bY = isTop ? -3 : BAR_H + 3;
                        const aY = isTop ? -14 : BAR_H + 16;
                        const tY = isTop ? -18 : BAR_H + 30;

                        return (
                          <g key={ai}>
                            <line x1={x1} y1={bY} x2={x2} y2={bY} stroke="#94a3b8" strokeWidth={1} />
                            <line x1={cx} y1={bY} x2={cx} y2={aY} stroke="#94a3b8" strokeWidth={1} />
                            {ann.label.map((line, li) => (
                              <text key={li} x={cx} y={tY + li * 11} textAnchor="middle"
                                style={{ fontSize: 9, fill: "#64748b", fontFamily: "'DM Mono', monospace" }}>
                                {line}
                              </text>
                            ))}
                          </g>
                        );
                      })}
                    </g>
                  );
                })}

                {/* X axis */}
                <g transform={`translate(${PAD.left}, ${PAD.top + ROWS.length * (BAR_H + BAR_GAP) - BAR_GAP + BAR_H + 8})`}>
                  <line x1={0} y1={6} x2={INNER_W} y2={6} stroke="#cbd5e1" strokeWidth={1.5} />
                  {tickIds.map(tick => (
                    <g key={tick}>
                      <line x1={xPos(tick)} y1={3} x2={xPos(tick)} y2={9} stroke="#94a3b8" strokeWidth={1.2} />
                      <text x={xPos(tick)} y={20} textAnchor="middle"
                        style={{ fontSize: 9.5, fill: "#94a3b8", fontFamily: "'DM Mono', monospace" }}>
                        {tick}
                      </text>
                    </g>
                  ))}
                  <text x={INNER_W / 2} y={36} textAnchor="middle"
                    style={{ fontSize: 10, fill: "#94a3b8", fontFamily: "'DM Sans', sans-serif" }}>
                    Data IDs
                  </text>
                </g>
              </svg>
            </div>

            <div style={{ marginTop: 12, fontSize: 11, fontFamily: "'DM Sans', sans-serif", color: "#64748b" }}>
              Click filter buttons to intersect criteria
            </div>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
